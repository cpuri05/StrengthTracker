<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strength Tracker</title>
    <!-- PWA manifest and theme colour.  The manifest enables "Add to Home Screen" on mobile devices and
         defines app icons and display behaviour.  The theme colour tints the browser UI on supported
         platforms. -->
    <!-- When deploying to GitHub Pages the PWA resides under
         /StrengthTracker/ so we prefix the manifest URL accordingly.
         Without this prefix the browser would fetch `/manifest.json`
         from the root of the domain, which doesn’t exist on GitHub
         Pages. */【80547752977172†L43-L63】 -->
    <link rel="manifest" href="/StrengthTracker/manifest.json" />
    <!-- Canonical URL to the GitHub Pages site.  This helps search
         engines identify the preferred URL and is required for
         consistent PWA installation on GitHub Pages. -->
    <link rel="canonical" href="https://cpuri05.github.io/StrengthTracker/" />
    <meta name="theme-color" content="#009688" />
    <!-- The application uses a minimal custom React-like library implemented in myreact.js.  -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="root"></div>
    <!-- Button shown when the app is installable on mobile.  It remains hidden
         until the `beforeinstallprompt` event fires.  Clicking the button
         triggers the installation prompt. -->
    <button id="installBtn" class="btn btn--primary install-btn" style="display: none; position: fixed; bottom: 1rem; right: 1rem; z-index: 1000;">
      Add to Home Screen
    </button>
    <script src="myreact.js"></script>
    <script src="app.js"></script>
    <script>
      // Register the service worker to enable offline caching and support
      // Add to Home Screen functionality.  This registration happens after
      // the page has loaded.  If the browser does not support service
      // workers, registration is skipped.
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
          // Register the service worker from the GitHub Pages sub-path.
          // When served from cpuri05.github.io/StrengthTracker/ the
          // service worker is available at `/StrengthTracker/service-worker.js`
          // and must be registered with the same scope to control
          // requests within the sub-directory【80547752977172†L43-L63】.
          navigator.serviceWorker
            .register('/StrengthTracker/service-worker.js', { scope: '/StrengthTracker/' })
            .catch(function (err) {
              console.error('Service worker registration failed:', err);
            });
        });
      }

      // Handle the PWA installation prompt.  When the browser detects that
      // the application can be installed, it dispatches the
      // `beforeinstallprompt` event.  Capture this event, prevent the
      // default mini-infobar from appearing and show a custom button to
      // trigger installation.  Once the user responds to the prompt,
      // hide the button.
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        const installBtn = document.getElementById('installBtn');
        if (installBtn) {
          installBtn.style.display = 'inline-flex';
          installBtn.addEventListener('click', () => {
            if (deferredPrompt) {
              deferredPrompt.prompt();
              deferredPrompt.userChoice.then(() => {
                deferredPrompt = null;
                installBtn.style.display = 'none';
              });
            }
          }, { once: true });
        }
      });
    </script>
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "su5lj7n6ul");
</script>
  </body>
</html>